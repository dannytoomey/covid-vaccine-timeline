# covid-vaccine-timelines

This is an [orderly](https://github.com/vimc/orderly) project. The
directories are:

`archive`: Includes outputs of the analysis scripts generated on 4/28/23. This is included so that re-generation of the preprint can be preformed without re-generating the models. 

`data`: Contains the following data:
-   `excess_mortality`: Fitted *nimue* models and pre-generated
    simulations, along with vaccine allocation information, for the fits
    to excess mortality.
-   `reported_deaths`: Fitted *nimue* models and pre-generated
    simulations, along with vaccine allocation information, for the fits
    to reported COVID deaths.
-   `raw`: Raw data used in modelling:
    -   `owid.rds`: Our World In Data dataset used for vaccine
        allocation, downloaded 13-02-2022
    -   `excess_deaths.rds`: Excess death estimates from the Economist,
        downloaded 13-02-2022
    -   `combined_data.Rds`: Reported COVID deaths dataset, downloaded
        13-02-2022
    -   `vaccine_agreements.rds, vaccine_doses_by_manufacturer.rds, who_vacc.rds, who_vacc_meta.rds`:
        Other vaccination datasets, downloaded 13-02-2022
    -   `worldsf.Rds`: World map sf used in the plotting, downloaded
        20-04-2022 from
        <https://datahub.io/core/geo-countries/r/countries.geojson>

`plots`: Includes `report.Rmd`, which generates the plots used in the preprint.

`src`: Contains structured `orderly` directories which generate the models used in the preprint. A seperate `README` is included in the `src` directory with directions to add counterfactual scenarios.

The purpose of this repository is to allow others to replicate the analysis used in our preprint and replicate the generation of the preprint in its entirety. 

## Installation

    git clone https://github.com/dannytoomey/covid-vaccine-timeline.git
    cd covid-vaccine-timeline
    open covid-vaccine-impact-orderly.Rproj

## Usage

The models used in the preprint can be generated locally by running `run-all.R`. This operation is resource intensive takes approximately 1 hour to complete on a 2022 Macbook Pro. The outputs of this script as generated on 4/28/23 are included in the `archive` directory so that re-generation of these results is not necessary to generate the preprint vignette.

The preprint can be generated locally by running `orderly::orderly_run("preprint")`. This will create a PDF of the preprint at `archive/preprint/[orderly id]/_book/_main.pdf`.

The plots used in the preprint can be generated by running `rmarkdown::render('./plots/report.Rmd')`
